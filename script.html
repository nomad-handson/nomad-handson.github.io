
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Basic description &#8212; NOMAD summer tutorials 1.0.0 documentation</title>
    <link rel="stylesheet" href="_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head>
  <body>
    <div class="header-wrapper" role="banner">
      <div class="header">
        <div class="headertitle"><a
          href="index.html">NOMAD summer tutorials 1.0.0 documentation</a></div>
        <div class="rel" role="navigation" aria-label="related navigation">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="basic-description">
<h1>Basic description<a class="headerlink" href="#basic-description" title="Permalink to this headline">¶</a></h1>
<div class="section" id="what-kind-of-programming-language-is-python">
<h2>What kind of programming language is Python?<a class="headerlink" href="#what-kind-of-programming-language-is-python" title="Permalink to this headline">¶</a></h2>
<p>There are many associations, but also questions related to Python and
its usage:</p>
<ul class="simple">
<li>scripting language / console</li>
<li>(just?) good as glue code</li>
<li>high/low performance language</li>
<li>good for prototyping (only?)</li>
<li>object oriented</li>
<li>interpreted (slow?)</li>
</ul>
<p>For clarifying one can start searching at the very base, the Python.org
homepage. There, the FAQ <a class="footnote-reference" href="#id19" id="id1">[1]</a> answers the question “<em>What is Python good
for?</em>” with:</p>
<blockquote>
<div><a href="#id2"><span class="problematic" id="id3">*</span></a>Python is a high-level general-purpose programming language that
can be applied to many different classes of problems. *</div></blockquote>
<p>Its <em>objective</em> is to make high level programming <strong>fun</strong> and
<strong>efficient</strong>. Of course these two are interlinked in a positive cycle -
reaching your goals efficiently is fun and satisfying, and having fun
helps with being efficient.</p>
<p>The means to achieve this are</p>
<ul class="simple">
<li>clear and natural-language-like syntax</li>
<li>large eco-system, including many libraries</li>
<li>easy integration of other code</li>
<li>being general (purpose)</li>
</ul>
</div>
<div class="section" id="paradigm">
<h2>Paradigm<a class="headerlink" href="#paradigm" title="Permalink to this headline">¶</a></h2>
<p>Python is a multi-paradigm language. Mostly used for
imperative/procedural (Fortran-, C-style) or object-oriented (C++, Java)
implementations, but it also allows functional and reflective code, and
even more by language extensions.</p>
</div>
<div class="section" id="a-matter-of-interpretation">
<h2>A matter of interpretation<a class="headerlink" href="#a-matter-of-interpretation" title="Permalink to this headline">¶</a></h2>
<p>Fist one has to notice that a language definition, like Python as such,
does not define what a system does with code written in it. This is part
of the language implementation.</p>
<p>In the most used Python implementation (CPython) the code is compiled
into an intermediate representation each time a change in the source is
detected before execution. This intermediate representation is bytecode,
much more efficient to process than the original code, but still
interpreted by a virtual machine, in contrast to classically compiled
code, which is executed directly on hardware. A way of describing this
is <strong>byte-code interpreted</strong>.</p>
<p>Other options for processing, for example just-in-time (JIT)
compilation, are available.</p>
</div>
<div class="section" id="what-about-performance">
<h2>What about performance<a class="headerlink" href="#what-about-performance" title="Permalink to this headline">¶</a></h2>
<p>Maybe the most relevant example in our field regarding performance of
Python is GPAW, a massively parallel electronic structure code mainly
written in Python. The “mainly” comes from a relatively small rest of
core-routines written in C, motivated by, as one developer expressed it:</p>
<blockquote>
<div><a href="#id4"><span class="problematic" id="id5">*</span></a>Python is good at everything, except multiplying numbers quickly. *</div></blockquote>
<p>Of course one of the main tasks of our scientific codes is multiplying
numbers, but does this disqualify Python for this purpose? The key to
this is, that the amount of computations is not reflected in the amount
of code-lines. Actually, experience shows, that it is rather easy to
separate some small number-crunching functionality, and have all the
control structures around it in a nice code. This is exactly what has
been done with high-performance numerical libraries like ScaLAPACK, and
codes like GPAW extend this principle. Figure [fig:gpaw] shows, that
only about 10% of their code consist of number-crunching routines
written in C.</p>
<p><img alt="Code-statistics for GPAW." src="gpaw" /> [fig:gpaw]</p>
</div>
<div class="section" id="python-2-or-3">
<h2>Python 2 or 3?<a class="headerlink" href="#python-2-or-3" title="Permalink to this headline">¶</a></h2>
<p>There are two main Python versions around. Obviously version 3 is newer,
but version 2 is still very present and at many systems even the
default. So what to choose?</p>
<p>As the Python.org wiki puts it <a class="footnote-reference" href="#id20" id="id6">[2]</a>:</p>
<blockquote>
<div><a href="#id7"><span class="problematic" id="id8">*</span></a>Python 2.x is legacy, Python 3.x is the present and future of the
language *</div></blockquote>
<p>The latest Python 2 release is 2.7 from 2010 and as one can guess, the
more developed language is Python 3, with its current release 3.6
(2016). Using the old version it has no advantages, but might be
necessary if strictly needed libraries are only available for Python 2.</p>
<p>In this introduction only the Python 3 standard is used.</p>
</div>
<div class="section" id="so-how-to-get-started">
<h2>So, how to get started?<a class="headerlink" href="#so-how-to-get-started" title="Permalink to this headline">¶</a></h2>
<p>Learning the syntax, as first step, takes only little effort. After that
one should really invest in learning how to do things the pythonic (see
later) way and ask as often, very often “shouldn’t there be an easier
way?”</p>
<p>A lot of information for getting started is provided by the official
python.org web page:</p>
<dl class="docutils">
<dt>Central Python documentation</dt>
<dd><div class="first line-block">
<div class="line">Contains complete references as well as introductory material</div>
</div>
<p class="last">(tutorial…).
| <a class="reference external" href="https://docs.python.org">https://docs.python.org</a></p>
</dd>
<dt>Wiki</dt>
<dd><div class="first line-block">
<div class="line">A lot of information “around” Python, like beginner’s guides, a</div>
</div>
<p class="last">list of beginner’s errors, recommendations for books and tools, …
| <a class="reference external" href="https://wiki.python.org">https://wiki.python.org</a></p>
</dd>
<dt>FAQ</dt>
<dd><div class="first last line-block">
<div class="line">Short answers to the basic questions treated here (and many more)</div>
<div class="line"><a class="reference external" href="https://docs.python.org/3/faq/general.html">https://docs.python.org/3/faq/general.html</a></div>
</div>
</dd>
</dl>
<p>Python has a very rich community, leaving a lot of advice in the form of
blogs and discussions on the internet. And for basically any
beginner’s-question one can assume, that it has been stated already
somewhere.</p>
</div>
</div>
<div class="section" id="main-features">
<h1>Main features<a class="headerlink" href="#main-features" title="Permalink to this headline">¶</a></h1>
<div class="section" id="syntax">
<h2>Syntax<a class="headerlink" href="#syntax" title="Permalink to this headline">¶</a></h2>
<p>Python prefers a visual and textual way instead of using special
characters.</p>
<ul>
<li><p class="first">Scope of routines, loops, … is defined by indentation</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">while</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">10</span><span class="p">:</span>
    <span class="nb">sum</span> <span class="o">=</span> <span class="nb">sum</span> <span class="o">+</span> <span class="n">i</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="n">response</span> <span class="o">=</span> <span class="s2">&quot;The sum of all integers from 1 to 10 &quot;</span> \
           <span class="s2">&quot;might be &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">sum</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>
</div>
<p>Line 8 is a continuation of the previous line. The indentation there
is not strictly necessary, but recommended for better readibility.</p>
</li>
<li><div class="first line-block">
<div class="line">Natural language:</div>
<div class="line">The code above is actually bad style (more about that later). An</div>
</div>
<p>alternative is the following:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">):</span>
    <span class="nb">sum</span> <span class="o">=</span> <span class="nb">sum</span> <span class="o">+</span> <span class="n">i</span>
</pre></div>
</div>
<p>Besides being more compact, it expresses what happens in a more
natural way.</p>
</li>
<li><p class="first">Special constructs for generators:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">the_sum</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">))</span>
</pre></div>
</div>
<p>This is still doing the same, but written in the most Python-like
way, using a particular syntax for generating a series of values.</p>
</li>
</ul>
</div>
<div class="section" id="types-variables">
<h2>Types &amp; variables<a class="headerlink" href="#types-variables" title="Permalink to this headline">¶</a></h2>
<p>As already seen, Python does not use explicit typing. There are no
primitive types, which means that everything that can be assigned to a
variable is an object. For example, adding two numbers can, besides
using the <code class="docutils literal"><span class="pre">+</span></code> operator, be done by</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="fm">__add__</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>Some classes, for example those that are basic types in other languages
(<code class="docutils literal"><span class="pre">float</span></code>, <code class="docutils literal"><span class="pre">int</span></code>, and <code class="docutils literal"><span class="pre">complex</span></code>, …) are immutable.</p>
<p>In Python <strong>containers</strong> are extremely helpful and extensively used.
Such types are for example:</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">list</span></code></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">my_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">the_second</span> <span class="o">=</span> <span class="n">my_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">the_last</span> <span class="o">=</span> <span class="n">my_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="n">all_but_the_first</span> <span class="o">=</span> <span class="n">my_list</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
</pre></div>
</div>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">dictionary</span></code></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">language_description</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;python&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
<span class="n">language_description</span><span class="p">[</span><span class="s2">&quot;useful&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

<span class="k">if</span> <span class="n">language_description</span><span class="p">[</span><span class="s2">&quot;useful&quot;</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;seems useful: &quot;</span> <span class="o">+</span> <span class="n">language_description</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">tuple</span></code></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="n">a</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<p>An example for how to define a simple function (the output is given as
comment below each print function):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">times_two</span><span class="p">(</span><span class="nb">input</span><span class="p">):</span>
    <span class="n">output</span> <span class="o">=</span> <span class="nb">input</span> <span class="o">*</span> <span class="mi">2</span>
    <span class="k">return</span> <span class="n">output</span>

<span class="n">a</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">double_a</span> <span class="o">=</span> <span class="n">times_two</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">double_a</span><span class="p">)</span>
<span class="c1"># 6</span>

<span class="n">b</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">double_b</span> <span class="o">=</span> <span class="n">times_two</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">double_b</span><span class="p">)</span>
<span class="c1"># (2+2j)</span>
</pre></div>
</div>
<p>Functions are also objects, which implies:</p>
<ul class="simple">
<li>a variable can be assigned to a function (“renaming”)</li>
<li>functions can be defined within functions.</li>
<li>functions can be a parameters or return values of other functions.</li>
</ul>
<p>Python provides a compact representation of functions working on
functions (equal to functionals in mathematics), the <em>decorators</em>.</p>
<p>A recurring question is if Python works with <em>call-by-value</em> or
<em>call-by-reference</em>. The discussions about the answer are often
hilarious, which shows that probably the best idea is to just understand
its behavior without classifying it with terms which are often enough
not even clearly defined.</p>
<p>Keeping in mind that everything is an object (= an instance of a class),
variables are just names attached to an object. An assignment is the
process of binding this name to the object. Where this name is valid, is
defined by the scope of the assignment  <a class="footnote-reference" href="#id21" id="id9">[3]</a>. One way of seeing this is
putting lables, (like price tags) to objects. In this sense re-assigning
a variable equals moving the label to another object. <a class="footnote-reference" href="#id22" id="id10">[4]</a></p>
<p>Applying this to function calls we get:</p>
<p>p0.4p0.4</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">change</span><span class="p">(</span><span class="nb">input</span><span class="p">):</span>
    <span class="nb">input</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="n">a</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">change</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="c1"># 4</span>
</pre></div>
</div>
<p>&amp;</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">change</span><span class="p">(</span><span class="nb">input</span><span class="p">):</span>
    <span class="nb">input</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">]</span>
<span class="n">change</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="c1"># [5]</span>
</pre></div>
</div>
<p>In both cases, when entering the function <code class="docutils literal"><span class="pre">change</span></code>, the names
<code class="docutils literal"><span class="pre">input</span></code> and <code class="docutils literal"><span class="pre">a</span></code> are labels for the same object.</p>
<p>In the left case the object is an integer and thus immutable, so the
<code class="docutils literal"><span class="pre">change</span></code> function assigns the name <code class="docutils literal"><span class="pre">input</span></code> to a new object, which
leaves the “outside” <code class="docutils literal"><span class="pre">a</span></code> unchanged.</p>
<p>In the second case, the object is a list, a mutable object. It allows to
change its <em>content</em>, which is exactly what is done in the function.
Since <code class="docutils literal"><span class="pre">a</span></code> is related to the same object, it also shows the change
<em>inside</em> the object.</p>
<p>The good news about this is, that when writing code in a clean style,
hardly any questions or surprises show up. If you constantly run into
doubts of the behavior of your code, most probably not the language, but
its usage is the problem.</p>
</div>
<div class="section" id="classes">
<h2>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h2>
<p>An example for class definition and usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Multiplier</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;multiplier&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">factor</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="o">=</span> <span class="n">factor</span>

    <span class="k">def</span> <span class="nf">multiply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">input</span><span class="p">):</span>
        <span class="n">output</span> <span class="o">=</span> <span class="nb">input</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
        <span class="k">return</span> <span class="n">output</span>


<span class="n">times_two</span> <span class="o">=</span> <span class="n">Multiplier</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

<span class="n">a</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">double_a</span> <span class="o">=</span> <span class="n">times_two</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">double_a</span><span class="p">)</span>
<span class="c1"># 6</span>

<span class="n">b</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">double_b</span> <span class="o">=</span> <span class="n">Multiplier</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">times_two</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">double_b</span><span class="p">)</span>
<span class="c1"># (2+2j)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">Multiplier</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<span class="c1"># multiplier</span>
</pre></div>
</div>
<dl class="docutils">
<dt>Line 1</dt>
<dd>defines the name of the class and its parent. Python allows multiple
inheritance.</dd>
<dt>Line 3</dt>
<dd>defines a variable which is the same for all instances of the class.
It is used in line 25.</dd>
<dt>Lines 5-6</dt>
<dd>are the constructor. Python has a set of predefined routines names
of the form <code class="docutils literal"><span class="pre">__bla__</span></code> with special meanings. Those are overloaded
for providing individual functionality. In this case we use it for
specifying a multiplication factor to be set by the user.</dd>
<dt>Lines 8-10</dt>
<dd>define a class routine. With the exception of static routines, the
first argument is always the class instance. Here we see that the
variable defined in the constructor is available in the <code class="docutils literal"><span class="pre">multiply</span></code>
routine.</dd>
<dt>Line 13</dt>
<dd>creates an instance of the <code class="docutils literal"><span class="pre">Multiplier</span></code> object.</dd>
<dt>Line 16</dt>
<dd>makes use of this object.</dd>
<dt>Line 21</dt>
<dd>does the same as line 16, but explicitly using the instance
parameter.</dd>
</dl>
<p>There is no mechanism for making routines or variables invisible outside
of the class. However, there is the <em>convention</em> that member names
starting with an underscore (<code class="docutils literal"><span class="pre">’_’</span></code>) are meant to be “private”. This is
based on the assumption, that programmers are mature enough not to need
restrictions given by the language.</p>
</div>
<div class="section" id="modules">
<h2>Modules<a class="headerlink" href="#modules" title="Permalink to this headline">¶</a></h2>
<p>A module is a file containing Python definitions and statements. The
multiplier class defined above can be such a module:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Multiplier</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;multiplier&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">factor</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="o">=</span> <span class="n">factor</span>

    <span class="k">def</span> <span class="nf">multiply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">input</span><span class="p">):</span>
        <span class="n">output</span> <span class="o">=</span> <span class="nb">input</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
        <span class="k">return</span> <span class="n">output</span>


<span class="n">times_two</span> <span class="o">=</span> <span class="n">Multiplier</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">times_three</span> <span class="o">=</span> <span class="n">Multiplier</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>It contains the definition of a class and two instances. The keyword for
accessing a module from any code is <code class="docutils literal"><span class="pre">import</span></code>, with the module name
given by its filename:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">multiplier_module</span>
<span class="kn">from</span> <span class="nn">multiplier_module</span> <span class="k">import</span> <span class="n">Multiplier</span>
<span class="kn">from</span> <span class="nn">multiplier_module</span> <span class="k">import</span> <span class="n">times_three</span>

<span class="n">a</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">double_a</span> <span class="o">=</span> <span class="n">multiplier_module</span><span class="o">.</span><span class="n">times_two</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">triple_a</span> <span class="o">=</span> <span class="n">times_three</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

<span class="n">i_want_four</span> <span class="o">=</span> <span class="n">Multiplier</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="n">four_a</span> <span class="o">=</span> <span class="n">i_want_four</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
<p>This code shows two ways of importing module functionality.</p>
<dl class="docutils">
<dt>Line 1</dt>
<dd>makes the whole module visible. Then its content is accessed via the
module name, as shown in line 6.</dd>
<dt>Lines 2 and 3</dt>
<dd>import specific members of the module, which makes them directly
accessible, demonstrated in lines 7 and 9.</dd>
</dl>
<p>It is also possible to import everything by using the asterisk (<code class="docutils literal"><span class="pre">’*’</span></code>)
character, however, this is regarded bad style because it does not
explicitly show what functionalities are available, and can yield
problems with namespaces.</p>
<p>Modules can also provide functionality for being <strong>executed</strong> from the
shell:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python3</span>
<span class="k">class</span> <span class="nc">Multiplier</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;multiplier&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">factor</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="o">=</span> <span class="n">factor</span>

    <span class="k">def</span> <span class="nf">multiply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">input</span><span class="p">):</span>
        <span class="n">output</span> <span class="o">=</span> <span class="nb">input</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
        <span class="k">return</span> <span class="n">output</span>

<span class="n">times_two</span> <span class="o">=</span> <span class="n">Multiplier</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">sys</span>

    <span class="nb">input</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">the_double</span> <span class="o">=</span> <span class="n">times_two</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Your input times 2 equals: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">the_double</span><span class="p">))</span>
</pre></div>
</div>
<p>This can be called from the shell in two ways:</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span>$&gt; python3 multiplier_executable.py 3

$&gt; ./multiplier_executable.py 3
</pre></div>
</div>
<dl class="docutils">
<dt>Line 1</dt>
<dd>defines the interpreter and makes the second version of the call
possible.</dd>
<dt>Line 16</dt>
<dd>is where the magic happens. A module can access its own name in the
variable <code class="docutils literal"><span class="pre">__name__</span></code>. If it is called as main program, its name is
<code class="docutils literal"><span class="pre">__main__</span></code>. Thus the <code class="docutils literal"><span class="pre">if</span></code>-clause means that the code in its
scope is only executed when calling <code class="docutils literal"><span class="pre">multiplier_executable.py</span></code> as
executable. So this file can run as script, as well as serve as
module to be included in other code.</dd>
<dt>Line 17</dt>
<dd>includes <code class="docutils literal"><span class="pre">sys</span></code> from Python’s standard library, which is then used
for getting the command line arguments in line 19.</dd>
</dl>
</div>
</div>
<div class="section" id="the-python-ecosystem">
<h1>The Python ecosystem<a class="headerlink" href="#the-python-ecosystem" title="Permalink to this headline">¶</a></h1>
<div class="section" id="the-python-core">
<h2>The Python core<a class="headerlink" href="#the-python-core" title="Permalink to this headline">¶</a></h2>
<p><em>The Python Language Reference</em> can be found at:</p>
<p><a class="reference external" href="https://docs.python.org/3/reference/index.html">https://docs.python.org/3/reference/index.html</a></p>
<p>Python comes with an extensive set of functionalities, called <em>The
Python Standard Library</em>:</p>
<p><a class="reference external" href="https://docs.python.org/3/library/index.html">https://docs.python.org/3/library/index.html</a></p>
</div>
<div class="section" id="external-packages">
<h2>External packages<a class="headerlink" href="#external-packages" title="Permalink to this headline">¶</a></h2>
<p>Python encourages the distribution of useful developments by providing</p>
<ul class="simple">
<li>a centralized code repository, currently containing over 100.000
packages</li>
<li>and a proper package management system making installations extremely
easy</li>
</ul>
<p>Recommendations about the usage of packages are given by the Python
Packaging Authority (PyPA):</p>
<p><a class="reference external" href="https://packaging.python.org/guides/tool-recommendations/">https://packaging.python.org/guides/tool-recommendations/</a></p>
<p>One example for a field where extensively using Python has been has been
going hand in hand with the development of many libraries, is data
visualization, nicely explained in a youtube video <a class="footnote-reference" href="#id23" id="id11">[5]</a>.</p>
<div class="section" id="the-python-package-index">
<h3>The Python Package Index<a class="headerlink" href="#the-python-package-index" title="Permalink to this headline">¶</a></h3>
<p>The mentioned central package repository is called Python Package Index,
or short PyPI, to be found at:</p>
<p><a class="reference external" href="https://pypi.python.org">https://pypi.python.org</a></p>
<p>Some examples for packages heavily used in science are:</p>
<dl class="docutils">
<dt>NumPy</dt>
<dd>array processing for numbers, strings, records, and objects</dd>
<dt>SciPy</dt>
<dd>scientific library for Python, e.g. numerical integration and
optimization</dd>
<dt>matplotlib</dt>
<dd>2D plotting library</dd>
<dt>SQLAlchemy</dt>
<dd>SQL toolkit and object relational mapper</dd>
</dl>
<p>One can also find packages that make important tools available. For
example <strong>spglib</strong> is originally a C-code for working with crystal
symmetries. There is a Python-package with the same name, providing
bindings to the C library. Similarly the package <strong>mpi4py</strong> provides
Python bindings for MPI.</p>
</div>
<div class="section" id="package-management">
<h3>Package management<a class="headerlink" href="#package-management" title="Permalink to this headline">¶</a></h3>
<p>Python’s recommended tool for managing packages is <strong>pip</strong>. It works as
command line tool, pretty similar to Linux package managers.</p>
<p>The main commands are</p>
<dl class="docutils">
<dt>pip install &lt;package_name&gt;</dt>
<dd>downloads and installs packages registered at PyPi. Also a local
package can be provided.</dd>
<dt>pip install –upgrade &lt;package_name&gt;</dt>
<dd>upgrades an installed package.</dd>
<dt>pip list</dt>
<dd>shows which packages are currently installed.</dd>
</dl>
</div>
</div>
<div class="section" id="virtual-environments">
<h2>Virtual environments<a class="headerlink" href="#virtual-environments" title="Permalink to this headline">¶</a></h2>
<p>A virtual environments is an independent, encapsulated Python
installation. This allows having several working environments, using
different packages or different versions of them, even different Python
versions.</p>
<p>The usual three steps of working with virtual environments are:</p>
<ol class="arabic">
<li><div class="first line-block">
<div class="line">Create virtual environment (only once)</div>
<div class="line">There are several virtual environment tools available. The</div>
</div>
<p>recommended one for Python3 is <code class="docutils literal"><span class="pre">venv</span></code>. A new virtual environment
named <code class="docutils literal"><span class="pre">venv_name</span></code> (we indicate that this is a parameter by using
the brackets) is set up by</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span>$ python -m venv &lt;venv_name&gt;
</pre></div>
</div>
<p>This will create a folder which is used as <em>Python</em> installation and
working directory, but is completely independent from the <em>code</em> to
work on.</p>
</li>
<li><p class="first">Activate environment</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span>$ source &lt;venv_name&gt;/bin/activate
</pre></div>
</div>
<p>This still leaves the user in the shell, indicating the currently
activated environment by writing its name at the beginning of the
prompt.</p>
</li>
<li><p class="first">Exit environment</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span>(&lt;venv_name&gt;) $ deactivate
</pre></div>
</div>
</li>
</ol>
<p>A newly created virtual environment will contain only a few packages,
which ones can be checked by using <code class="docutils literal"><span class="pre">pip</span> <span class="pre">list</span></code>. The whole flow looks
like:</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span>$ pyvenv &lt;venv_name&gt;
$ source &lt;venv_name&gt;/bin/activate
(&lt;venv_name&gt;) $ pip list
pip (8.1.1)
setuptools (20.10.1)
(&lt;venv_name&gt;) $ deactivate
</pre></div>
</div>
</div>
</div>
<div class="section" id="how-to-take-advantage-of-python">
<h1>How to take advantage of Python<a class="headerlink" href="#how-to-take-advantage-of-python" title="Permalink to this headline">¶</a></h1>
<p>So far basic principles for making it <em>possible</em> to use Python were
presented. But there is no point in changing the tools one uses, if they
don’t yield any improvement. In the case of Python, the language has the
<em>potential</em> of making programming considerably more productive, but this
potential has to be unleashed by the <em>way of using</em> Python.</p>
<p>This is well expressed in a blog entry called “<em>Python is not
Java</em>” <a class="footnote-reference" href="#id24" id="id12">[6]</a> about a code produced by people who had just switched from
Java to Python:</p>
<blockquote>
<div><a href="#id13"><span class="problematic" id="id14">*</span></a>So, the sad thing is that these poor folks worked much, much harder
than they needed to, in order to produce much more code than they
needed to write, that then performs much more slowly than the
equivalent idiomatic Python would. *</div></blockquote>
<p>Making good usage of the language and doing things “the Python way” has
even its own term: <strong>pythonic</strong>.</p>
<div class="section" id="zen-of-python">
<h2>Zen of Python<a class="headerlink" href="#zen-of-python" title="Permalink to this headline">¶</a></h2>
<p>Basic “instructions” for working in a pythonic way are given by the Zen
of Python, which can be retrieved by typing in Python console:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">this</span>
</pre></div>
</div>
<p>In full lenght this is:</p>
<ul class="simple">
<li>Beautiful is better than ugly.</li>
<li>Explicit is better than implicit.</li>
<li>Simple is better than complex.</li>
<li>Complex is better than complicated.</li>
<li>Flat is better than nested.</li>
<li>Sparse is better than dense.</li>
<li>Readability counts.</li>
<li>Special cases aren’t special enough to break the rules.</li>
<li>Although practicality beats purity.</li>
<li>Errors should never pass silently.</li>
<li>Unless explicitly silenced.</li>
<li>In the face of ambiguity, refuse the temptation to guess.</li>
<li>There should be one– and preferably only one –obvious way to do it.</li>
<li>Although that way may not be obvious at first unless you’re Dutch.</li>
<li>Now is better than never.</li>
<li>Although never is often better than *right* now.</li>
<li>If the implementation is hard to explain, it’s a bad idea.</li>
<li>If the implementation is easy to explain, it may be a good idea.</li>
<li>Namespaces are one honking great idea – let’s do more of those!</li>
</ul>
</div>
<div class="section" id="the-famous-pep8">
<h2>The famous PEP8<a class="headerlink" href="#the-famous-pep8" title="Permalink to this headline">¶</a></h2>
<p>Some important instructions for good Python-usage can be found in the
Python Enhancement Proposals, or short PEP <a class="footnote-reference" href="#id25" id="id15">[7]</a>. Despite sounding pretty
casual they define important processes, functionalities, and rules which
are accepted as standard. Each of those proposals has a fixed number,
for example the zen of Python is PEP20.</p>
<p>Probably the most important PEP is PEP8, which is a reference for the
Python coding style. In contrast to other languages this is a <em>globally</em>
accepted standard, thus also many tools around it have been developed,
for example plugins for editors that constantly check PEP8 compliance
and inform about problems. There are even online PEP8 checkers, for
example <a class="reference external" href="http://pep8online.com/">http://pep8online.com/</a></p>
</div>
<div class="section" id="writing-idomatic-python">
<h2>Writing idomatic Python<a class="headerlink" href="#writing-idomatic-python" title="Permalink to this headline">¶</a></h2>
<p>In the following a few examples are given as demonstration. For going
deeper in to this topic masses of resources are available online and in
printed form. A nice one can be found in Jeff Knupps blog <a class="footnote-reference" href="#id26" id="id16">[8]</a>, which
contains also other topics in a short but yet solid form.</p>
<div class="section" id="lists-co">
<h3>Lists &amp; co<a class="headerlink" href="#lists-co" title="Permalink to this headline">¶</a></h3>
<p>Some basic list and string processing:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">some_strings</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;This&quot;</span><span class="p">,</span> <span class="s2">&quot;is&quot;</span><span class="p">,</span> <span class="s2">&quot;not&quot;</span><span class="p">,</span> <span class="s2">&quot;hello&quot;</span><span class="p">,</span> <span class="s2">&quot;world&quot;</span><span class="p">]</span>

<span class="c1"># we want a numerated list of the strings</span>
<span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">some_strings</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{0}</span><span class="s2">: </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">some_strings</span><span class="p">[</span><span class="n">index</span><span class="p">]))</span>
    <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="c1"># now the pythonic version</span>
<span class="k">for</span> <span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">some_strings</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{0}</span><span class="s2">: </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">string</span><span class="p">))</span>


<span class="c1"># to build a sentence</span>
<span class="n">sentence</span> <span class="o">=</span> <span class="n">some_strings</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="k">for</span> <span class="n">string</span> <span class="ow">in</span> <span class="n">some_strings</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
    <span class="n">sentence</span> <span class="o">+=</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">string</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sentence</span><span class="p">)</span>

<span class="c1"># now the pythonic version:</span>
<span class="n">sentence</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">some_strings</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sentence</span><span class="p">)</span>
</pre></div>
</div>
<p>In general <code class="docutils literal"><span class="pre">enumerate</span></code> should always be used instead of manually
managed list indices, as well as the <code class="docutils literal"><span class="pre">in</span></code> keyword for going through
iterable objects. Consistently everything you would like to be iterable,
is iterable.</p>
<p>There are many tools around for making list handling easy, for example
<code class="docutils literal"><span class="pre">zip</span></code> for combining iterables.</p>
</div>
<div class="section" id="generators-and-list-comprehensions">
<h3>Generators and list comprehensions<a class="headerlink" href="#generators-and-list-comprehensions" title="Permalink to this headline">¶</a></h3>
<p>Imagine we want the sum of all prime numbers up to the number given by
<code class="docutils literal"><span class="pre">max</span></code>, given we have a function <code class="docutils literal"><span class="pre">isprime</span></code> that checks if an integer
is a prime number. Then a generator expression can be used to formulate
this in a compact way:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">the_sum</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="p">)</span> <span class="k">if</span> <span class="n">is_prime</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
</pre></div>
</div>
<p>A generator expression evaluates the items one by one. If they are
needed all at once, for example for keeping them in memory, a list
comprehension can be used:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">my_numbers</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="p">)</span> <span class="k">if</span> <span class="n">is_prime</span><span class="p">(</span><span class="n">i</span><span class="p">)]</span>
<span class="n">the_sum</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">my_numbers</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="eafp-and-exception-handling">
<h3>EAFP and exception handling<a class="headerlink" href="#eafp-and-exception-handling" title="Permalink to this headline">¶</a></h3>
<p>EAFP stands for: “<em>It’s easier to ask forgiveness than permission</em>”, in
contrast to the LBYL “<em>Look before you leap</em>” concept.</p>
<p>Imagine the following birthday calender:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dateutil</span> <span class="k">import</span> <span class="n">parser</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="k">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">math</span>

<span class="n">birthdays</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;hans&quot;</span><span class="p">:</span> <span class="s2">&quot;31.12.1966&quot;</span><span class="p">,</span>
             <span class="s2">&quot;sepp&quot;</span><span class="p">:</span> <span class="s2">&quot;02.04.1986&quot;</span><span class="p">,</span>
             <span class="s2">&quot;lilli&quot;</span><span class="p">:</span> <span class="s2">&quot;29.02.2001&quot;</span><span class="p">}</span>

<span class="n">name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;we are looking for: &quot;</span><span class="p">)</span>


<span class="n">date_bday</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">birthdays</span><span class="p">[</span><span class="n">name</span><span class="p">])</span>
<span class="n">date_now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
<span class="n">age</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">((</span><span class="n">date_now</span> <span class="o">-</span> <span class="n">date_bday</span><span class="p">)</span><span class="o">.</span><span class="n">days</span> <span class="o">/</span> <span class="mf">365.25</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> is </span><span class="si">{1}</span><span class="s2"> years old&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">))</span>
</pre></div>
</div>
<p>We have a list of people with their birth dates as dictionary. Obviously
the code provides a minimal comand line interface reading a name from
the user input, and calculating the current age of that person.</p>
<p>If the user asks for a person that is not present in the dictionary, the
code fails with:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;/home/ghuhs/bsc/presentations/20170801_python_intro/10.py&quot;</span><span class="p">,</span>
    <span class="n">line</span> <span class="mi">12</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
    <span class="n">date_bday</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">birthdays</span><span class="p">[</span><span class="n">name</span><span class="p">])</span>
<span class="ne">KeyError</span><span class="p">:</span> <span class="s1">&#39;hh&#39;</span>
</pre></div>
</div>
<p>The - coming from other languages - probably most intuitive way to deal
with this is to check first if the name is in the dictionary, which is
the LBYL way:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dateutil</span> <span class="k">import</span> <span class="n">parser</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="k">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">math</span>

<span class="n">birthdays</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;hans&quot;</span><span class="p">:</span> <span class="s2">&quot;31.12.1966&quot;</span><span class="p">,</span>
             <span class="s2">&quot;sepp&quot;</span><span class="p">:</span> <span class="s2">&quot;02.04.1986&quot;</span><span class="p">,</span>
             <span class="s2">&quot;lilli&quot;</span><span class="p">:</span> <span class="s2">&quot;29.02.2001&quot;</span><span class="p">}</span>

<span class="n">name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;we are looking for: &quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">birthdays</span><span class="p">:</span>
    <span class="n">date_bday</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">birthdays</span><span class="p">[</span><span class="n">name</span><span class="p">])</span>
    <span class="n">date_now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="n">age</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">((</span><span class="n">date_now</span> <span class="o">-</span> <span class="n">date_bday</span><span class="p">)</span><span class="o">.</span><span class="n">days</span> <span class="o">/</span> <span class="mf">365.25</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> is </span><span class="si">{1}</span><span class="s2"> years old&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">))</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;unknown name&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If now we ask for Lilli’s age, we notice that there is something wrong
with the date:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;/home/ghuhs/bsc/presentations/20170801_python_intro/10.py&quot;</span><span class="p">,</span>
  <span class="n">line</span> <span class="mi">12</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
    <span class="n">date_bday</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">birthdays</span><span class="p">[</span><span class="n">name</span><span class="p">])</span>
  <span class="n">File</span> <span class="s2">&quot;/usr/lib/python3.4/site-packages/dateutil/parser.py&quot;</span><span class="p">,</span>
  <span class="n">line</span> <span class="mi">1008</span><span class="p">,</span> <span class="ow">in</span> <span class="n">parse</span>
    <span class="k">return</span> <span class="n">DEFAULTPARSER</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">timestr</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
  <span class="n">File</span> <span class="s2">&quot;/usr/lib/python3.4/site-packages/dateutil/parser.py&quot;</span><span class="p">,</span>
  <span class="n">line</span> <span class="mi">404</span><span class="p">,</span> <span class="ow">in</span> <span class="n">parse</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">default</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="o">**</span><span class="n">repl</span><span class="p">)</span>
<span class="ne">ValueError</span><span class="p">:</span> <span class="n">day</span> <span class="ow">is</span> <span class="n">out</span> <span class="n">of</span> <span class="nb">range</span> <span class="k">for</span> <span class="n">month</span>
</pre></div>
</div>
<p>So if we want to avoid also this case, we need to check if the given
dates are valid. Moreover we should also ensure that the date string has
a valid format, and so on. The resulting code would consist of more
checking than actual functionality, distributed through the code, so
that in the end the actual workflow is hard to see. Remember the zen:
“<em>Readability counts</em>”!</p>
<p>Of course one could (and should) ask if Python does not provide all this
checking. And of course it does, and its way of dealing with it is
exactly the exception <code class="docutils literal"><span class="pre">ValueError</span></code> we see.</p>
<p>This leads us to the EAFP concept, which translates to: “<em>write the
standard behavior of your code and treat the exceptions.</em>”</p>
<p>Applying this we end up with:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dateutil</span> <span class="k">import</span> <span class="n">parser</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="k">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">math</span>

<span class="n">birthdays</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;hans&quot;</span><span class="p">:</span> <span class="s2">&quot;31.12.1966&quot;</span><span class="p">,</span>
             <span class="s2">&quot;sepp&quot;</span><span class="p">:</span> <span class="s2">&quot;02.04.1986&quot;</span><span class="p">,</span>
             <span class="s2">&quot;lilli&quot;</span><span class="p">:</span> <span class="s2">&quot;29.02.2001&quot;</span><span class="p">}</span>

<span class="n">name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;we are looking for: &quot;</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">date_bday</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">birthdays</span><span class="p">[</span><span class="n">name</span><span class="p">])</span>
    <span class="n">date_now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="n">age</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">((</span><span class="n">date_now</span> <span class="o">-</span> <span class="n">date_bday</span><span class="p">)</span><span class="o">.</span><span class="n">days</span> <span class="o">/</span> <span class="mf">365.25</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> is </span><span class="si">{1}</span><span class="s2"> years old&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">))</span>

<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;name not found&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">problem</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;invalid birthday date: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">problem</span><span class="p">))</span>
</pre></div>
</div>
<p>This provides:</p>
<ul class="simple">
<li>readable code</li>
<li>explicit treatment of errors (also in the zen)</li>
<li>flexibility on the level of error handling, as one can also catch
mistakes ona coarser level</li>
<li>avoiding the need to access the dictionary twice, which furthermore
avoids race conditions in situations where the object might change
between the accesses</li>
</ul>
</div>
</div>
</div>
<div class="section" id="code-quality-matters">
<h1>Code quality matters<a class="headerlink" href="#code-quality-matters" title="Permalink to this headline">¶</a></h1>
<p>Producing a software product which is presentable to (outside)
customers/users as well as sustainable for (internal) developments is
not a Python-specific requirement. Detailed descriptions would go beyond
the scope of this introduction, so here only some entry-points for
getting started are mentioned.</p>
<p>Key topics besides the design of the actual code are documentation and
testing.</p>
<div class="section" id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h2>
<p>Python provides the concept of <strong>docstrings</strong>. These are comments which
are the first statement in module, function, class, and method
definitions. Actually each of these entities should have a docstring,
explaining <em>what</em> it does (not <em>how</em>).</p>
<p>A docstring can be any string, also going over multiple lines.</p>
<p>For example a docstring for generating a complex number could read:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">complex</span><span class="p">(</span><span class="n">real</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">imag</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Form a complex number.</span>

<span class="sd">    Keyword arguments:</span>
<span class="sd">    real -- the real part (default 0.0)</span>
<span class="sd">    imag -- the imaginary part (default 0.0)</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
<p>The most established tool for autogenerating code documentation from
these docstrings is Sphinx <a class="footnote-reference" href="#id27" id="id17">[9]</a> - “the Doxygen of Python”.</p>
<p>It has its own pretty extensive syntax based on reStructured Text
(reST), allowing text formatting, images, tables, and so on. For example
a Sphinx-compatible version of the documentation above is:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">complex</span><span class="p">(</span><span class="n">real</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">imag</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Form a complex number.</span>

<span class="sd">    Keyword arguments:</span>
<span class="sd">    :param real: the real part (default 0.0)</span>
<span class="sd">    :param imag: the imaginary part (default 0.0)</span>
<span class="sd">    :type real: any scalar number type</span>
<span class="sd">    :type imag: any scalar number type</span>
<span class="sd">    :return: an object representing a complex number</span>
<span class="sd">    :rtype: Complex</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="testing">
<h2>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h2>
<p>A JUnit-inspired unit testing framework is directly integrated into
Python as part of the standard library.</p>
<p>The example given by the module documentation <a class="footnote-reference" href="#id28" id="id18">[10]</a> is:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">unittest</span>

<span class="k">class</span> <span class="nc">TestStringMethods</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">test_upper</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span> <span class="s1">&#39;FOO&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_isupper</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="s1">&#39;FOO&#39;</span><span class="o">.</span><span class="n">isupper</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="s1">&#39;Foo&#39;</span><span class="o">.</span><span class="n">isupper</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">test_split</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;hello world&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">(),</span> <span class="p">[</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="s1">&#39;world&#39;</span><span class="p">])</span>
        <span class="c1"># check that s.split fails when the separator is not a string</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">):</span>
            <span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">unittest</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<table class="docutils footnote" frame="void" id="id19" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td><a class="reference external" href="https://docs.python.org/3/faq/general.html">https://docs.python.org/3/faq/general.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id20" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id6">[2]</a></td><td><a class="reference external" href="https://wiki.python.org/moin/Python2orPython3">https://wiki.python.org/moin/Python2orPython3</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id21" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id9">[3]</a></td><td><div class="first last line-block">
<div class="line">A good explanation with some vintage ASCII art can be found at</div>
<div class="line"><a class="reference external" href="http://python.net/crew/mwh/hacks/objectthink.html">http://python.net/crew/mwh/hacks/objectthink.html</a></div>
</div>
</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id22" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id10">[4]</a></td><td><div class="first line-block">
<div class="line">Nicely depicted at</div>
<div class="line"><a class="reference external" href="http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html#other-languages-have-variables">http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html#other-languages-have-variables</a></div>
</div>
<p class="last">and the following chapter.</p>
</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id23" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id11">[5]</a></td><td><a class="reference external" href="https://youtu.be/OC-YdBz8Llw">https://youtu.be/OC-YdBz8Llw</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id24" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id12">[6]</a></td><td><a class="reference external" href="http://dirtsimple.org/2004/12/python-is-not-java.html">http://dirtsimple.org/2004/12/python-is-not-java.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id25" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id15">[7]</a></td><td><a class="reference external" href="https://www.python.org/dev/peps/">https://www.python.org/dev/peps/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id26" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id16">[8]</a></td><td><a class="reference external" href="https://jeffknupp.com/blog/2012/10/04/writing-idiomatic-python/">https://jeffknupp.com/blog/2012/10/04/writing-idiomatic-python/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id27" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id17">[9]</a></td><td><a class="reference external" href="http://www.sphinx-doc.org">http://www.sphinx-doc.org</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id28" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id18">[10]</a></td><td><a class="reference external" href="https://docs.python.org/3/library/unittest.html">https://docs.python.org/3/library/unittest.html</a></td></tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Table Of Contents</h3>
          <p class="caption"><span class="caption-text">Tutorial sessions:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="2_tue_morning.html">Tuesday, 9:00 – 13:00</a></li>
<li class="toctree-l1"><a class="reference internal" href="2_tue_aftern.html">Tuesday, 14:30 – 18:30</a></li>
<li class="toctree-l1"><a class="reference internal" href="3_wed_morning.html">Wednesday, 9:00 – 13:00</a></li>
<li class="toctree-l1"><a class="reference internal" href="3_wed_aftern.html">Wednesday, 14:30 – 18:30</a></li>
<li class="toctree-l1"><a class="reference internal" href="4_thu_morning.html">Thursday, 9:00 – 13:00</a></li>
<li class="toctree-l1"><a class="reference internal" href="4_thu_aftern.html">Thursday, 14:30 – 18:30</a></li>
<li class="toctree-l1"><a class="reference internal" href="5_fri_morning.html">Friday, 9:00 – 13:00</a></li>
</ul>

          <div role="search">
            <h3 style="margin-top: 1.5em;">Search</h3>
            <form class="search" action="search.html" method="get">
                <input type="text" name="q" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
            </form>
          </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <div role="navigation" aria-label="related navigaton">
            <a href="genindex.html" title="General Index"
              >index</a>
          </div>
          <div role="note" aria-label="source link">
              <br/>
              <a href="_sources/script.rst.txt"
                rel="nofollow">Show Source</a>
          </div>
        </div>

        <div class="right">
          
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.3.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>